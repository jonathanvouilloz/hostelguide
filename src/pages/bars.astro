---
import BaseLayout from '../layouts/BaseLayout.astro';
import SpotCard from '../components/SpotCard.astro';
import { getSpots, getCategoryMeta } from '../lib/content';

const meta = getCategoryMeta('bars');
const spots = await getSpots('bars');
---

<BaseLayout title={meta?.name || 'Bars'}>
  <div class="p-4 max-w-md mx-auto pb-safe">
    <header class="mb-4">
      <h1 class="text-xl font-bold flex items-center gap-2">
        <span aria-hidden="true">{meta?.emoji}</span>
        {meta?.name}
      </h1>
      <p class="text-muted text-sm mt-1">{meta?.description}</p>
    </header>

    {spots.length > 0 ? (
      <div class="spots-grid space-y-4">
        {spots.map(spot => (
          <SpotCard spot={spot} />
        ))}
      </div>
    ) : (
      <div class="empty-state card p-6 text-center">
        <p class="text-muted">No bars listed yet.</p>
      </div>
    )}

    <div class="mt-6 text-center">
      <a href="/" class="btn-secondary inline-block">
        ‚Üê Back to Home
      </a>
    </div>
  </div>
</BaseLayout>
